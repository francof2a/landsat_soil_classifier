Adapted from https://github.com/Xilinx/RFNoC-HLS-NeuralNet/tree/master/rfnoc/hls/nnet_lib